<!--  <p>{{aluno | json}}</p> --> <!-- Teste : mostra o conteúdo dos objetos-->

<form #form="ngForm" (ngSubmit)="onSubmit()" class="container my-5">
    <div class="mb-3">
        <label for="nome" class="form-label">Nome Completo</label>
        <input id="nome" type="text" 
               class="form-control" 
               [ngClass]="{
                  'is-valid': nome.valid,
                  'is-invalid': nome.invalid && nome.touched
               }"
               name="nome" [(ngModel)]="aluno.nome"
               #nome="ngModel"
               minlength="8"
               required
        />
        <div *ngIf="nome.touched && nome.invalid" class="invalid-feedback">
            Nome inválido!
        </div>
        <div *ngIf="nome.valid" class="valid-feedback">Ok</div>
    </div>

    <div class="mb-3">
        <label for="email" class="form-label">E-mail</label>
        <input type="email" id="email" 
               class="form-control" 
               [ngClass]="{
                'is-valid': email.valid,
                'is-invalid': email.invalid && email.touched
               }"
               name="email" [(ngModel)]="aluno.email"
               #email="ngModel"
               required
        />
        <div *ngIf="email.touched && email.invalid" class="invalid-feedback">
            E-mail inválido!
        </div>
        <div *ngIf="email.valid" class="valid-feedback">Ok</div>
    </div>

    <div class="mb-3">
        <label for="descricao" class="form-label">Descrição do aluno</label>
        <textarea id="descricao" rows="3"
                  class="form-control"
                  [ngClass]="{
                    'is-valid': descricao.valid,
                    'is-invalid': descricao.invalid && descricao.touched
                   }"
                  name="descricao" [(ngModel)]="aluno.descricao"
                  #descricao="ngModel"
                  minlength="20"
                  maxlength="140"
                  required
        ></textarea>
        <!--  {{descricao.errors | json}}  -->
        <div *ngIf="descricao.touched && descricao.invalid" class="invalid-feedback">
            <div *ngIf="descricao.errors?.['required']">Descrição obrigatoria!</div>
            <div *ngIf="descricao.errors?.['minlength']">Tamanho mínimo de 20 caracteres</div>
        </div>
    </div>

    <div class="mb-3">
        <label for="nivel" class="form-label">Nível de ensino</label>
        <select id="nivel" 
                class="form-select"
                [ngClass]="{
                    'is-valid': nivel.valid,
                    'is-invalid': nivel.invalid && nivel.touched
                   }"
                name="nivel" [(ngModel)]="aluno.nivel"
                #nivel="ngModel"
                required 
        >
            <option selected disabled value="">Selecione um nível</option>
            <option value="1">Ensino fundamental I</option>
            <option value="2">Ensino fundamental II</option>
            <option value="3">Ensino Médio</option>
        </select>
        <div *ngIf="nivel.touched && nivel.invalid" class="invalid-feedback">
            Nível inválido!
        </div>
        <div *ngIf="nivel.valid" class="valid-feedback">Ok</div>
    </div>

    <div class="mb-3">
        <div class="form-check">
            <input type="checkbox" 
                   class="form-check-input"
                   name="usuario-sistema" id="usuario-sistema" 
                   [(ngModel)]="aluno.usuarioAtivo"
                   />
            <label class="form-check-label" for="usuario-sistema">Usuário do sistema?</label>                   
        </div>
    </div>

    <div class="mb-3" *ngIf="aluno.usuarioAtivo">
        <label for="senha" class="form-label">Senha</label> 
        <input id="senha" type="password" 
               class="form-control" 
               [ngClass]="{
                'is-valid': senha.valid,
                'is-invalid': senha.invalid && senha.touched
               }"
               name="senha" [(ngModel)]="aluno.senha"
               #senha="ngModel"
               required
        />
        <div *ngIf="senha.touched && senha.invalid" class="invalid-feedback">
            Senha inválida!
        </div>
        <div *ngIf="senha.valid" class="valid-feedback">Ok</div>
    </div>

    <div class="mb-3">
        <label for="cidade" class="form-label">Cidade</label>
        <input id="cidade" type="text" 
               class="form-control" 
               [ngClass]="{
                'is-valid': cidade.valid,
                'is-invalid': cidade.invalid && cidade.touched
               }"
               name="cidade" [(ngModel)]="aluno.endereco.cidade"
               #cidade="ngModel"
               required
        />
        <div *ngIf="cidade.touched && cidade.invalid" class="invalid-feedback">
            Cidade inválida!
        </div>
        <div *ngIf="cidade.valid" class="valid-feedback">Ok</div>
    </div>

    <div class="mb-3">
        <label for="estado" class="form-label">Estado (UF)</label>
        <input id="estado" type="text" 
               class="form-control" 
               [ngClass]="{
                'is-valid': estado.valid,
                'is-invalid': estado.invalid && estado.touched
               }"
               name="estado" [(ngModel)]="aluno.endereco.estado"
               #estado="ngModel"
               minlength="2"
               maxlength="2"
               required
        />
        <div *ngIf="estado.touched && estado.invalid" class="invalid-feedback">
            Estado inválido!
        </div>
        <div *ngIf="estado.valid" class="valid-feedback">Ok</div>
    </div>

    <button [disabled]="form.invalid" type="submit" class="btn btn-primary">
        Submit
    </button>

</form>